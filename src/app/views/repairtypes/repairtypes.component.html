<app-header-page titlePage="Tipologia Interventi" breadCrumbPage="TIpologia interventi" iconPage="fas fa-toolbox"></app-header-page>

<app-content-page>
    <div content-header>
      <h3 class="card-title">
        Interventi
      </h3>
      <div class="card-tools">
        <button type="button" class="btn bg-primary" data-widget="remove" data-toggle="tooltip" title="Remove"
          (click)="newItem(contentAddTypeIntervention)">
          <i class="fa fa-plus-circle"></i>
        </button>
      </div>
    </div>

    <table class="table">
        <thead>
          <tr>
            <th>#</th>
            <th>Id</th>
            <th>Tipologia Intervento</th>
            <th>Azioni</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let repairType of repairTypes; let i = index">
            <td style="width: 5%">{{ i+1 }}</td>
            <td>{{ repairType.id }}</td>
            <td>{{ repairType.nome }}</td>
            <td class="actions" style="width: 10%">
              <button class="btn btn-sm btn-primary" (click)="edit(contentAddTypeIntervention, repairType)">
                <i class="fa fa-edit"></i>
              </button>
              <button class="btn btn-sm btn-danger" (click)="delete(repairType)">
                <i class="fa fa-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
</app-content-page>

<ng-template #contentAddTypeIntervention let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">{{modalTitle}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="repairTypesForm">
            <div class="form-group">
                <label>Nome Tipologia</label>
                <input type="text" formControlName="nome" class="form-control datetimepicker-input">
                <div *ngIf="nome.invalid && (nome.dirty || nome.touched)" class="alert alert-danger">
                    <div *ngIf="nome.errors.required">
                        Il nome della tipologia Ã¨ obbligatorio
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss('cancel click')">
            Annulla
        </button>
        <button type="button" ngbAutofocus class="btn btn-success" (click)="save()">
            Salva
        </button>
    </div>
    <!-- {{repairTypesForm.value|json}} -->
</ng-template>